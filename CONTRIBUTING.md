# è´¡çŒ®æŒ‡å—

æ„Ÿè°¢æ‚¨è€ƒè™‘ä¸º xtsqlorm åšå‡ºè´¡çŒ®ï¼

## ğŸ¤ å¦‚ä½•è´¡çŒ®

### æŠ¥å‘Š Bug

å¦‚æœæ‚¨å‘ç°äº† Bugï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼æŠ¥å‘Šï¼š

1. åœ¨ [Issues](https://gitee.com/sandorn/xtsqlorm/issues) é¡µé¢åˆ›å»ºæ–° Issue
2. ä½¿ç”¨æ¸…æ™°çš„æ ‡é¢˜æè¿°é—®é¢˜
3. æä¾›è¯¦ç»†çš„å¤ç°æ­¥éª¤
4. è¯´æ˜é¢„æœŸè¡Œä¸ºå’Œå®é™…è¡Œä¸º
5. é™„ä¸Šç›¸å…³çš„é”™è¯¯ä¿¡æ¯å’Œæ—¥å¿—
6. æ³¨æ˜æ‚¨çš„ç¯å¢ƒä¿¡æ¯ï¼ˆPython ç‰ˆæœ¬ã€æ“ä½œç³»ç»Ÿç­‰ï¼‰

**Bug æŠ¥å‘Šæ¨¡æ¿**:

````markdown
## é—®é¢˜æè¿°

ç®€è¦æè¿°é‡åˆ°çš„é—®é¢˜

## å¤ç°æ­¥éª¤

1. ç¬¬ä¸€æ­¥
2. ç¬¬äºŒæ­¥
3. ...

## é¢„æœŸè¡Œä¸º

æè¿°æ‚¨æœŸæœ›å‘ç”Ÿçš„è¡Œä¸º

## å®é™…è¡Œä¸º

æè¿°å®é™…å‘ç”Ÿçš„è¡Œä¸º

## ç¯å¢ƒä¿¡æ¯

-   Python ç‰ˆæœ¬: 3.10
-   xtsqlorm ç‰ˆæœ¬: 0.1.0
-   æ“ä½œç³»ç»Ÿ: Windows 10
-   æ•°æ®åº“: MySQL 8.0

## é”™è¯¯ä¿¡æ¯

```python
Traceback...
```
````

````

---

### æå‡ºæ–°åŠŸèƒ½

å¦‚æœæ‚¨æœ‰æ–°åŠŸèƒ½çš„æƒ³æ³•ï¼Œè¯·ï¼š

1. å…ˆåœ¨ Issues ä¸­è®¨è®ºæ‚¨çš„æƒ³æ³•
2. è¯´æ˜åŠŸèƒ½çš„ç”¨é€”å’Œä»·å€¼
3. æè¿°å®ç°æ–¹æ¡ˆï¼ˆå¦‚æœ‰ï¼‰
4. ç­‰å¾…ç»´æŠ¤è€…åé¦ˆ

**åŠŸèƒ½è¯·æ±‚æ¨¡æ¿**:

```markdown
## åŠŸèƒ½æè¿°
ç®€è¦æè¿°æ‚¨æƒ³è¦çš„æ–°åŠŸèƒ½

## ä½¿ç”¨åœºæ™¯
æè¿°è¿™ä¸ªåŠŸèƒ½è§£å†³ä»€ä¹ˆé—®é¢˜

## å®ç°å»ºè®®
ï¼ˆå¯é€‰ï¼‰æ‚¨å¯¹å®ç°æ–¹å¼çš„å»ºè®®

## æ›¿ä»£æ–¹æ¡ˆ
ï¼ˆå¯é€‰ï¼‰å…¶ä»–å¯èƒ½çš„è§£å†³æ–¹æ¡ˆ
````

---

### æäº¤ä»£ç 

#### 1. å‡†å¤‡å¼€å‘ç¯å¢ƒ

```bash
# Fork å¹¶å…‹éš†ä»“åº“
git clone https://gitee.com/your-username/xtsqlorm.git
cd xtsqlorm

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv .venv
source .venv/bin/activate  # Linux/macOS
.venv\Scripts\activate     # Windows

# å®‰è£…å¼€å‘ä¾èµ–
pip install -e ".[dev]"

# æˆ–ä½¿ç”¨ uv (æ¨è)
uv sync
```

#### 2. åˆ›å»ºåˆ†æ”¯

```bash
# åˆ›å»ºæ–°åˆ†æ”¯
git checkout -b feature/your-feature-name
# æˆ–
git checkout -b fix/your-bug-fix
```

åˆ†æ”¯å‘½åè§„èŒƒï¼š

-   `feature/*` - æ–°åŠŸèƒ½
-   `fix/*` - Bug ä¿®å¤
-   `docs/*` - æ–‡æ¡£æ›´æ–°
-   `refactor/*` - ä»£ç é‡æ„
-   `test/*` - æµ‹è¯•ç›¸å…³
-   `chore/*` - æ„å»º/å·¥å…·ç›¸å…³

#### 3. ç¼–å†™ä»£ç 

è¯·éµå¾ªä»¥ä¸‹è§„èŒƒï¼š

**ä»£ç é£æ ¼**:

-   ä½¿ç”¨ Ruff è¿›è¡Œä»£ç æ£€æŸ¥å’Œæ ¼å¼åŒ–
-   éµå¾ª PEP 8 è§„èŒƒ
-   ä½¿ç”¨åŠè§’æ ‡ç‚¹ç¬¦å·
-   æ·»åŠ å¿…è¦çš„ç±»å‹æ³¨è§£

**æ–‡æ¡£å­—ç¬¦ä¸²**:

-   æ‰€æœ‰å…¬å…±å‡½æ•°/ç±»å¿…é¡»æœ‰ docstring
-   ä½¿ç”¨ Google é£æ ¼çš„ docstring
-   åŒ…å«å‚æ•°è¯´æ˜ã€è¿”å›å€¼ã€å¼‚å¸¸ä¿¡æ¯
-   æ·»åŠ ä½¿ç”¨ç¤ºä¾‹

**ç¤ºä¾‹**:

```python
def create_user(
    username: str,
    email: str,
    *,
    phone: str | None = None
) -> User:
    """åˆ›å»ºæ–°ç”¨æˆ·

    æ­¤å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°ç”¨æˆ·å¹¶ä¿å­˜åˆ°æ•°æ®åº“ã€‚å¦‚æœç”¨æˆ·åå·²å­˜åœ¨,
    å°†æŠ›å‡º ValueError å¼‚å¸¸ã€‚

    Args:
        username: ç”¨æˆ·å, å¿…é¡»å”¯ä¸€
        email: ç”µå­é‚®ç®±åœ°å€
        phone: ç”µè¯å·ç , å¯é€‰

    Returns:
        User: åˆ›å»ºçš„ç”¨æˆ·å¯¹è±¡

    Raises:
        ValueError: ç”¨æˆ·åå·²å­˜åœ¨æ—¶æŠ›å‡º
        ValidationError: æ•°æ®éªŒè¯å¤±è´¥æ—¶æŠ›å‡º

    Example:
        >>> user = create_user('john', 'john@example.com')
        >>> print(user.username)
        'john'
    """
    # å®ç°ä»£ç 
    ...
```

**æµ‹è¯•**:

-   ä¸ºæ–°åŠŸèƒ½æ·»åŠ æµ‹è¯•
-   ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡
-   æµ‹è¯•è¦†ç›–ç‡åº” â‰¥ 80%

#### 4. è¿è¡Œæ£€æŸ¥

æäº¤å‰è¯·è¿è¡Œä»¥ä¸‹æ£€æŸ¥ï¼š

```bash
# ä»£ç é£æ ¼æ£€æŸ¥
ruff check xtsqlorm/ examples/

# ä»£ç æ ¼å¼åŒ–
ruff format xtsqlorm/ examples/

# ç±»å‹æ£€æŸ¥
basedpyright xtsqlorm/

# è¿è¡Œæµ‹è¯•ï¼ˆå¦‚æœ‰ï¼‰
pytest

# è¿è¡Œç¤ºä¾‹ä»£ç 
uv run python examples/example_01_basic_sync.py
```

#### 5. æäº¤æ›´æ”¹

```bash
# æ·»åŠ æ›´æ”¹
git add .

# æäº¤ (ä½¿ç”¨æ¸…æ™°çš„æäº¤ä¿¡æ¯)
git commit -m "feat: add user authentication feature"

# æ¨é€åˆ°æ‚¨çš„ Fork
git push origin feature/your-feature-name
```

**æäº¤ä¿¡æ¯è§„èŒƒ**:

```
<type>(<scope>): <subject>

<body>

<footer>
```

**Type ç±»å‹**:

-   `feat`: æ–°åŠŸèƒ½
-   `fix`: Bug ä¿®å¤
-   `docs`: æ–‡æ¡£æ›´æ–°
-   `style`: ä»£ç æ ¼å¼ä¿®æ”¹
-   `refactor`: ä»£ç é‡æ„
-   `test`: æµ‹è¯•ç›¸å…³
-   `chore`: æ„å»º/å·¥å…·ç›¸å…³
-   `perf`: æ€§èƒ½ä¼˜åŒ–

**ç¤ºä¾‹**:

```
feat(repository): add batch update method

- å®ç°æ‰¹é‡æ›´æ–°åŠŸèƒ½
- ä¼˜åŒ–æ€§èƒ½,ä½¿ç”¨ bulk_update_mappings
- æ·»åŠ ç›¸å…³æµ‹è¯•

Closes #123
```

#### 6. åˆ›å»º Pull Request

1. è®¿é—®æ‚¨çš„ Fork é¡µé¢
2. ç‚¹å‡» "Pull Request" æŒ‰é’®
3. é€‰æ‹©ç›®æ ‡åˆ†æ”¯ï¼ˆé€šå¸¸æ˜¯ `main`ï¼‰
4. å¡«å†™ PR æè¿°ï¼š
    - è¯´æ˜æ›´æ”¹çš„å†…å®¹å’ŒåŸå› 
    - å¼•ç”¨ç›¸å…³ Issue
    - åˆ—å‡ºæµ‹è¯•æƒ…å†µ
    - æ·»åŠ æˆªå›¾ï¼ˆå¦‚é€‚ç”¨ï¼‰

**PR æ¨¡æ¿**:

```markdown
## æ›´æ”¹è¯´æ˜

æè¿°æ­¤ PR çš„ä¸»è¦æ›´æ”¹

## ç›¸å…³ Issue

Closes #123

## æ›´æ”¹ç±»å‹

-   [ ] Bug ä¿®å¤
-   [ ] æ–°åŠŸèƒ½
-   [ ] æ–‡æ¡£æ›´æ–°
-   [ ] ä»£ç é‡æ„
-   [ ] æ€§èƒ½ä¼˜åŒ–

## æµ‹è¯•

-   [ ] å·²æ·»åŠ æµ‹è¯•
-   [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
-   [ ] å·²è¿è¡Œç¤ºä¾‹ä»£ç 

## æ£€æŸ¥æ¸…å•

-   [ ] ä»£ç ç¬¦åˆé¡¹ç›®è§„èŒƒ
-   [ ] å·²æ›´æ–°æ–‡æ¡£
-   [ ] å·²è¿è¡Œ Ruff æ£€æŸ¥
-   [ ] å·²è¿è¡Œç±»å‹æ£€æŸ¥
-   [ ] æäº¤ä¿¡æ¯æ¸…æ™°æ˜ç¡®
```

---

## ğŸ“ ä»£ç è§„èŒƒ

### Python ä»£ç é£æ ¼

-   **ç¼©è¿›**: 4 ä¸ªç©ºæ ¼
-   **è¡Œé•¿åº¦**: æœ€å¤§ 120 å­—ç¬¦
-   **å¼•å·**: å•å¼•å·ä¼˜å…ˆ
-   **å¯¼å…¥é¡ºåº**: æ ‡å‡†åº“ â†’ ç¬¬ä¸‰æ–¹åº“ â†’ æœ¬åœ°æ¨¡å—

### å‘½åè§„èŒƒ

-   **æ¨¡å—/åŒ…**: `lowercase_with_underscores`
-   **ç±»**: `CamelCase`
-   **å‡½æ•°/å˜é‡**: `lowercase_with_underscores`
-   **å¸¸é‡**: `UPPERCASE_WITH_UNDERSCORES`
-   **ç§æœ‰å±æ€§**: `_leading_underscore`

### ç±»å‹æ³¨è§£

æ‰€æœ‰å…¬å…± API å¿…é¡»æœ‰ç±»å‹æ³¨è§£ï¼š

```python
from typing import Optional, List, Dict, Any

def get_users(
    limit: int = 10,
    offset: int = 0,
    *,
    active_only: bool = True
) -> List[User]:
    ...
```

### å¼‚å¸¸å¤„ç†

```python
# ä½¿ç”¨å…·ä½“çš„å¼‚å¸¸ç±»å‹
try:
    result = risky_operation()
except ValueError as e:
    log.error(f'Invalid value: {e}')
    raise
except DatabaseError as e:
    log.error(f'Database error: {e}')
    return None

# é¿å…è£¸ except
# âŒ ä¸å¥½
try:
    ...
except:
    pass

# âœ… å¥½
try:
    ...
except Exception as e:
    log.error(f'Unexpected error: {e}')
    raise
```

---

## ğŸ§ª æµ‹è¯•æŒ‡å—

### ç¼–å†™æµ‹è¯•

```python
import pytest
from xtsqlorm import create_repository
from tests.models import User

class TestUserRepository:
    """ç”¨æˆ·ä»“å‚¨æµ‹è¯•"""

    @pytest.fixture
    def user_repo(self):
        """åˆ›å»ºç”¨æˆ·ä»“å‚¨"""
        return create_repository(User, db_key='test')

    def test_create_user(self, user_repo):
        """æµ‹è¯•åˆ›å»ºç”¨æˆ·"""
        user = user_repo.create({
            'username': 'test_user',
            'email': 'test@example.com'
        })

        assert user.id is not None
        assert user.username == 'test_user'

    def test_get_by_id(self, user_repo):
        """æµ‹è¯•æ ¹æ® ID è·å–ç”¨æˆ·"""
        user = user_repo.create({
            'username': 'test_user',
            'email': 'test@example.com'
        })

        found = user_repo.get_by_id(user.id)
        assert found is not None
        assert found.id == user.id
```

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
pytest tests/test_repository.py

# è¿è¡Œç‰¹å®šæµ‹è¯•ç±»
pytest tests/test_repository.py::TestUserRepository

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–¹æ³•
pytest tests/test_repository.py::TestUserRepository::test_create_user

# æ˜¾ç¤ºè¯¦ç»†è¾“å‡º
pytest -v

# æ˜¾ç¤ºè¦†ç›–ç‡
pytest --cov=xtsqlorm --cov-report=html
```

---

## ğŸ“š æ–‡æ¡£è´¡çŒ®

### æ–‡æ¡£ç±»å‹

1. **API æ–‡æ¡£**: é€šè¿‡ docstring è‡ªåŠ¨ç”Ÿæˆ
2. **ç”¨æˆ·æŒ‡å—**: `docs/` ç›®å½•ä¸‹çš„ Markdown æ–‡ä»¶
3. **ç¤ºä¾‹ä»£ç **: `examples/` ç›®å½•
4. **README**: é¡¹ç›®ä¸»é¡µæ–‡æ¡£

### æ–‡æ¡£è§„èŒƒ

-   ä½¿ç”¨æ¸…æ™°ç®€æ´çš„è¯­è¨€
-   æä¾›å®é™…å¯è¿è¡Œçš„ç¤ºä¾‹
-   ä¿æŒæ–‡æ¡£ä¸ä»£ç åŒæ­¥
-   ä½¿ç”¨æ­£ç¡®çš„ Markdown æ ¼å¼
-   æ·»åŠ å¿…è¦çš„é“¾æ¥å’Œå¼•ç”¨

---

## ğŸ” ä»£ç å®¡æŸ¥

Pull Request å°†ç»è¿‡ä»¥ä¸‹å®¡æŸ¥ï¼š

1. **åŠŸèƒ½å®¡æŸ¥**: ç¡®ä¿åŠŸèƒ½æ­£ç¡®å®ç°
2. **ä»£ç è´¨é‡**: æ£€æŸ¥ä»£ç é£æ ¼å’Œè§„èŒƒ
3. **æµ‹è¯•è¦†ç›–**: éªŒè¯æµ‹è¯•å®Œæ•´æ€§
4. **æ–‡æ¡£å®Œæ•´**: æ£€æŸ¥æ–‡æ¡£æ˜¯å¦å®Œå–„
5. **æ€§èƒ½å½±å“**: è¯„ä¼°æ€§èƒ½å½±å“
6. **å®‰å…¨æ€§**: æ£€æŸ¥æ½œåœ¨å®‰å…¨é—®é¢˜

---

## ğŸ¯ è´¡çŒ®å»ºè®®

### é€‚åˆæ–°æ‰‹çš„ä»»åŠ¡

-   ä¿®å¤æ–‡æ¡£ä¸­çš„æ‹¼å†™é”™è¯¯
-   æ”¹è¿›é”™è¯¯ä¿¡æ¯
-   æ·»åŠ ä»£ç ç¤ºä¾‹
-   å®Œå–„å•å…ƒæµ‹è¯•
-   ç¿»è¯‘æ–‡æ¡£

æŸ¥æ‰¾ [good first issue](https://gitee.com/sandorn/xtsqlorm/issues?labels=good%20first%20issue) æ ‡ç­¾ã€‚

### é«˜çº§ä»»åŠ¡

-   å®ç°æ–°åŠŸèƒ½
-   æ€§èƒ½ä¼˜åŒ–
-   æ¶æ„æ”¹è¿›
-   å¤æ‚ Bug ä¿®å¤

---

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœæ‚¨åœ¨è´¡çŒ®è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š

1. æŸ¥çœ‹ç°æœ‰çš„ [Issues](https://gitee.com/sandorn/xtsqlorm/issues)
2. é˜…è¯» [æ–‡æ¡£](docs/)
3. åœ¨ Issue ä¸­æé—®
4. è”ç³»ç»´æŠ¤è€…: sandorn@live.cn

---

## ğŸ“œ è¡Œä¸ºå‡†åˆ™

### æˆ‘ä»¬çš„æ‰¿è¯º

ä¸ºäº†è¥é€ å¼€æ”¾å’Œå‹å¥½çš„ç¯å¢ƒ,æˆ‘ä»¬æ‰¿è¯º:

-   å°Šé‡ä¸åŒçš„è§‚ç‚¹å’Œç»éªŒ
-   æ¥å—å»ºè®¾æ€§çš„æ‰¹è¯„
-   å…³æ³¨å¯¹ç¤¾åŒºæœ€æœ‰åˆ©çš„äº‹æƒ…
-   å¯¹å…¶ä»–ç¤¾åŒºæˆå‘˜è¡¨ç¤ºåŒç†å¿ƒ

### ä¸å¯æ¥å—çš„è¡Œä¸º

-   ä½¿ç”¨æ€§åˆ«åŒ–çš„è¯­è¨€æˆ–å›¾åƒ
-   å‘è¡¨ä¾®è¾±/è´¬æŸæ€§è¯„è®º
-   äººèº«æ”»å‡»
-   éªšæ‰°è¡Œä¸º
-   å‘å¸ƒä»–äººçš„ç§äººä¿¡æ¯

### æ‰§è¡Œ

è¿åè¡Œä¸ºå‡†åˆ™çš„è¡Œä¸ºå¯èƒ½å¯¼è‡´:

1. è­¦å‘Š
2. ä¸´æ—¶ç¦æ­¢å‚ä¸
3. æ°¸ä¹…ç¦æ­¢å‚ä¸

---

## ğŸ‰ è®¤å¯è´¡çŒ®è€…

æˆ‘ä»¬ä¼šåœ¨ä»¥ä¸‹ä½ç½®è®¤å¯è´¡çŒ®è€…:

-   README.md è‡´è°¢éƒ¨åˆ†
-   CHANGELOG.md ç‰ˆæœ¬è¯´æ˜
-   é¡¹ç›®æ–‡æ¡£ä¸­

---

æ„Ÿè°¢æ‚¨ä¸º xtsqlorm åšå‡ºè´¡çŒ®ï¼ğŸ‰

**ç»´æŠ¤è€…**: sandorn <sandorn@live.cn>  
**æœ€åæ›´æ–°**: 2025-10-25
